<HTML>
<head>
    <title>Potatobean Animation</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@700&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background: #000;
            width: 100%;
            overflow: hidden;
        }
        body {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            transition: background 1s;
        }
        .potatobean-img {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0.1);
            opacity: 0;
            transition: opacity 0.5s, filter 1s;
            z-index: 2;
            filter: grayscale(0%);
            animation: zoomIn 1.2s cubic-bezier(0.23, 1.01, 0.32, 1) 0.2s forwards;
        }
        @keyframes zoomIn {
            0% {
                transform: translate(-50%, -50%) scale(0.1);
                opacity: 0;
            }
            30% {
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }
        .flash {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: #fff;
            opacity: 0;
            pointer-events: none;
            z-index: 10;
            animation: flashAnim 0.3s 1.4s forwards;
        }
        @keyframes flashAnim {
            0% { opacity: 0; }
            20% { opacity: 1; }
            100% { opacity: 0; }
        }
        .potatobean-text {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-family: 'Quicksand', 'Nunito', 'Poppins', Arial, sans-serif;
            font-weight: 700;
            font-size: 3vw;
            color: #888;
            letter-spacing: 0.1em;
            line-height: 1.1em;
            opacity: 0;
            z-index: 5;
            pointer-events: none;
            user-select: none;
            text-shadow: 0 2px 8px #000a;
            transition: opacity 1.2s;
        }
        .potatobean-text.visible {
            opacity: 1;
        }
        .menu-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            display: flex;
            justify-content: center;
            gap: 1.5em;
            padding: 1.2em 0 0.7em 0;
            z-index: 20;
            background: transparent;
        }
        .menu-btn {
            font-family: 'Quicksand', 'Nunito', 'Poppins', Arial, sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            background: #ffe066;
            color: #222;
            border: none;
            border-radius: 2em;
            padding: 0.5em 1.6em;
            margin: 0 0.2em;
            cursor: pointer;
            box-shadow: 0 2px 8px #0002;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        }
        .menu-btn:hover, .menu-btn:focus {
            background: #fff3b0;
            color: #000;
            box-shadow: 0 4px 16px #0003;
        }
        .menu-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 1000vw; height: 1000vh;
            background: rgba(0,0,0,0.5);
            z-index: 30;
            align-items: flex-start;
            justify-content: center;
        }
        .menu-overlay.active {
            display: flex;
        }
        .menu-content {
            background: rgba(255, 224, 102, 0.9);
            color: #222;
            font-family: 'Quicksand', 'Nunito', 'Poppins', Arial, sans-serif;
            font-size: 1.5em;
            padding: 2em 2.5em;
            min-width: 300px;
            width: calc(100vw - 100px);
            height: calc(100vh - 100px);
            box-shadow: 0 8px 32px #0005;
            text-align: center;
            position: fixed;
            top: 50px;
            left: 50px;
            right: 50px;
            bottom: 50px;
            overflow: auto;
            opacity: 1;
            transition: none;
        }
        .menu-content::-webkit-scrollbar {
            width: 12px;
        }
        .menu-content::-webkit-scrollbar-thumb {
            background: #ffe066;
            border-radius: 0;
        }
        .menu-close {
            position: absolute;
            top: 0.7em;
            right: 1em;
            background: none;
            border: none;
            font-size: 1.2em;
            color: #222;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="menu-bar">
            <button class="menu-btn" data-menu="products">Products</button>
            <button class="menu-btn" data-menu="about">About</button>
            <button class="menu-btn" data-menu="contact">Contact</button>
            <button class="menu-btn" data-menu="game">Game</button>
            <button class="menu-btn" data-menu="books">Books</button>
    </div>
    <div class="menu-overlay" id="menuOverlay">
        <div class="menu-content" id="menuContent">
            <button class="menu-close" id="menuClose" title="Close">&times;</button>
            <div id="menuText">Menu content</div>
        </div>
    </div>
    <div class="flash"></div>
    <img src="potatobean.png" class="potatobean-img" id="potato" alt="Potatobean">
    <div class="potatobean-text" id="pb-text">
        potato<br>bean<br>studios
    </div>
    <script>
        // After zoom and flash, fade out image and fade to grey
        setTimeout(function() {
            var img = document.getElementById('potato');
            img.style.opacity = 0;
            img.style.filter = 'grayscale(100%)';
        }, 1800); // after zoom and flash
        // Fade in the text overlay a bit after the flash
        setTimeout(function() {
            document.getElementById('pb-text').classList.add('visible');
        }, 1500);
        // Menu logic
        const menuOverlay = document.getElementById('menuOverlay');
        const menuContent = document.getElementById('menuContent');
        const menuText = document.getElementById('menuText');
        const menuClose = document.getElementById('menuClose');
        document.querySelectorAll('.menu-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                let menuHtml = '';
                let type = btn.getAttribute('data-menu');
                if(type === 'products') menuHtml = `<div style='font-size:0.7em;margin-bottom:1em;'>Three Body Gravity Simulation</div><canvas id='gravityCanvas' width='1000' height='800' style='background:#111;display:block;margin:0 auto;box-shadow:0 2px 16px #0008;'></canvas>`;
                if(type === 'about') menuHtml = 'in potatobean studios -- it is like amazon plus more stuff yay.';
                if(type === 'contact') menuHtml = 'CODE at potatobean.com[not really]';
                if(type === 'game') {
                    menuHtml = `<div style='font-size:0.7em;margin-bottom:1em;'>Use ↑ ↓ ← → or touch to move. Avoid the bullets!</div><canvas id='gameCanvas' width='550' height='400' style='background:#222;display:block;margin:0 auto;box-shadow:0 2px 16px #0008;'></canvas><div id='gameTouchControls' style='margin:1em 0;'><button id='touchUp' style='font-size:2em;padding:0.5em 1em;margin:0 1em;'>⬆️</button><button id='touchDown' style='font-size:2em;padding:0.5em 1em;margin:0 1em;'>⬇️</button><button id='touchLeft' style='font-size:2em;padding:0.5em 1em;margin:0 1em;'>⬅️</button><button id='touchRight' style='font-size:2em;padding:0.5em 1em;margin:0 1em;'>➡️</button></div><div id='gameOverMsg' style='display:none;font-size:1em;color:#b00;margin-top:1em;'>Game Over!<br><button onclick=\"window.restartGame&&window.restartGame()\">Restart</button></div>`;
                }
                if(type === 'books') {
                    menuHtml = `
                    <div id="bookContainer" style="display:flex;justify-content:center;align-items:center;height:100%;">
                        <div id="bookView" style="cursor:pointer;position:relative;">
                            <img id="bookPage0" src="0.jpg" style="max-height:70vh;max-width:45vw;box-shadow:0 4px 32px #0006;border-radius:8px;transition:box-shadow 0.3s;" alt="Book Page">
                        </div>
                    </div>
                    <div style='font-size:0.7em;margin-top:1em;'>Click the page to turn</div>`;
                }
                menuText.innerHTML = menuHtml;
                menuOverlay.classList.add('active');
                // If game, start game logic after DOM update
                if(type === 'game') setTimeout(()=>window.startPotatoGame && window.startPotatoGame(), 100);
                // Start book viewer if needed
                if(type === 'books') setTimeout(()=>window.startBookViewer && window.startBookViewer(), 200);
                // Start gravity sim if needed
                if(type === 'products') setTimeout(()=>window.startGravitySim && window.startGravitySim(), 100);
            });
        });
        menuClose.addEventListener('click', function() {
            menuOverlay.classList.remove('active');
        });
        menuOverlay.addEventListener('click', function(e) {
            if(e.target === menuOverlay) menuOverlay.classList.remove('active');
        });
        // External JS modules for menu features
        // (game.js, book.js, product.js)
        // These must be loaded at the end of the body
    </script>
    <script src="game.js"></script>
    <script src="book.js"></script>
    <script src="product.js"></script>
</body>
</HTML>